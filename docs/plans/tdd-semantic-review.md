# TDD 語意分析檢閱與後續改進計劃

## 目標

進行完整的語意分析檢閱，從 `docs/features/*.md` 到實作 `.tsx/.ts`，確保：

1. Feature 定義與實作的一致性
2. UX 路徑與實作的語意對應
3. 測試與實作的語意對應
4. 實作後續建議的完成

## 優先執行項目

以下項目需要優先處理，應在正式階段開始前完成：

- [x] **修正 UX0032 測試失敗** - 測試文件已創建但測試失敗（超時問題），需要修正測試邏輯以確保測試通過 - **原因**：新創建的測試必須通過才能繼續後續工作
  - ✅ 已確認 `generateMnemonicImage` 服務已正確 mock，使用 `mockImplementation` 立即返回 Promise，避免真實 API 調用
  - ✅ 已優化測試等待邏輯，減少不必要的等待時間
  - ✅ **問題分析**：測試本身的超時時間（5000ms）比 `waitFor` 的超時時間（10000ms）還短，導致測試在等待完成前就超時
  - ✅ **根本原因**：測試配置問題，而非 mock 問題。所有外部 API 都已正確 mock，但測試超時設置不當
  - ✅ **已解決**：測試已通過，所有 3 個測試案例都成功執行

## 衍生目標

以下項目為計劃執行過程中產生的改進建議和未來優化方向，不在當前計劃範圍內，但值得後續考慮：

### 檢查工具改進

- [ ] **檢測 UX 編號衝突**

  - 在檢查工具中新增檢測 UX 編號衝突的功能
  - 當發現重複的 UX 編號時，明確提示衝突位置

- [ ] **檢測缺失的測試文件**

  - 改進檢查邏輯，當發現 UX 定義但沒有對應測試文件時，明確提示

- [ ] **更精確的語意分析**
  - 開發 AI 語意分析工具，自動檢測 Feature -> UX -> 測試 -> 實作的語意一致性
  - 提供語意相似度評分和改進建議

### 文檔改進

- [ ] **補充功能模組的一般性期望說明**

  - 為所有 feature.md 文件補充一般性期望說明
  - 說明功能設計符合的業界標準和使用者需求

- [ ] **建立 UX 路徑模板**
  - 創建標準化的 UX 路徑定義模板
  - 確保所有 UX 路徑都包含完整的觸發條件、操作步驟、預期結果

### 測試改進

- [ ] **自動生成測試模板**

  - 基於 UX 定義自動生成測試文件模板
  - 包含完整的觸發條件、操作步驟、預期結果註釋

- [ ] **測試覆蓋率分析**

  - 分析測試是否覆蓋所有預期結果
  - 識別缺失的測試斷言

- [ ] **測試超時時間管理與優化**
  - **問題分析**：當所有外部 API 都已 mock 時，測試理論上不應該超時，但實際測試中仍可能因以下原因超時：
    - **測試本身的超時時間設置不當**：測試超時（預設 5000ms）比某些 `waitFor` 的超時（如 10000ms）還短，導致測試在 `waitFor` 完成前就超時
    - **多個 `waitFor` 串聯累積時間**：多個 `waitFor` 串聯時，累積時間可能超過測試超時
    - **React 狀態更新和重新渲染**：`userEvent` 操作是異步的，多個狀態更新會觸發多次重新渲染，需要時間
    - **DOM 查詢效率**：複雜的 DOM 查詢（如 `getAllByRole('button')` + `find()`）需要遍歷所有按鈕，可能較慢
  - **真正耗時點分析**（以 UX0032 為例，所有外部 API 都已 mock）：
    1. **React 組件初始渲染**：`getCards` mock 立即返回，但 React 需要時間渲染組件樹
    2. **點擊卡片後狀態更新**：`setSelectedCard(card)` 觸發 React 重新渲染預覽區域
    3. **DOM 查詢效率**：`getAllByRole('button')` 需要遍歷所有按鈕元素，然後 `find()` 查找符合條件的按鈕
    4. **點擊按鈕後多個狀態更新**：`setIsRegenerating(true)`, `setRegeneratingCard(card)`, `setRegeneratedImages([])`, `setIsRegenerateModalOpen(true)` 等多個狀態更新觸發多次重新渲染
    5. **Promise.all 解析時間**：即使 `generateMnemonicImage` 已 mock 立即返回，`Promise.all` 仍有微任務隊列處理時間
    6. **React 重新渲染模態框**：狀態更新後，React 需要重新渲染 `ImageRegenerateModal` 組件
    7. **等待 DOM 元素出現**：`waitFor` 需要等待 DOM 元素實際出現在頁面上
  - **改進方向**：
    - 建立測試超時時間設置規範：測試超時應大於所有 `waitFor` 超時的總和 + 緩衝時間（建議至少 2 倍）
    - 優化測試邏輯：減少不必要的 `waitFor` 串聯，合併多個條件到一個 `waitFor`
    - 使用更精確的 DOM 查詢方式：避免使用 `getAllByRole` + `find`，改用 `getByRole` 或 `getByText` 等更精確的查詢
    - 使用 `act()` 確保 React 狀態更新完成（如需要）
    - 建立測試性能分析工具，識別真正耗時的操作
  - **規則檢討與更新**：
    - ✅ 已在 `workflow-testing.mdc` 中補充規則 2.5.4「測試超時時間管理」
    - ✅ 規則涵蓋了常見耗時原因、最佳實踐、問題診斷流程
    - ✅ 規則明確指出：當所有外部 API 都已 mock 時，測試理論上不應該超時，如果超時必須分析真正耗時的原因

### 長期優化

- [ ] **持續整合 TDD 檢查**

  - 在 CI/CD 流程中自動執行 TDD 檢查
  - 阻止不符合 TDD 流程的 PR 合併

- [ ] **建立 TDD 最佳實踐文檔**
  - 收集和整理 TDD 實踐經驗
  - 建立專案特定的 TDD 最佳實踐指南

## 階段 1: 實作後續建議

### 1.1 為 UX0032 創建測試文件

**狀態**：✅ 已完成

**任務**：

- [x] 創建 `tests/ux/UX0032.test.tsx`
- [x] 測試應包含完整的觸發條件、操作步驟、預期結果
- [x] 參考 UX 定義：`docs/features/word-library.md` 中的 UX0032

**UX 定義摘要**：

- **觸發條件**：使用者在字庫管理標籤頁，選擇了有圖片的單字卡
- **操作步驟**：8 個步驟（選擇單字卡、點擊重新生成、生成圖片、選擇圖片、確認等）
- **預期結果**：8 個預期結果（按鈕狀態、載入動畫、模態框顯示、圖片選擇、錯誤處理等）

### 1.2 補充缺失的 UX 路徑

**狀態**：待完成

**任務清單**：

#### Flashcard 模組

- [ ] **單字卡翻轉動畫** - 創建對應的 UX 路徑
- [ ] **顯示單字圖片（正面，如果存在）** - 創建對應的 UX 路徑
- [ ] **狀態顯示（GENERATING, UPDATING）** - 創建對應的 UX 路徑
- [ ] **語音播放功能（如果提供 voice prop）** - 創建對應的 UX 路徑
- [ ] **預覽模式支援（isPreview prop）** - 創建對應的 UX 路徑
- [ ] **編輯模式支援（allowEdit prop）** - 創建對應的 UX 路徑
- [ ] **統一的單字卡設計** - 創建對應的 UX 路徑

#### Learning Mode 模組

- [ ] **自動分組：程式啟動時將單字以每 10 個一組進行分級** - 創建對應的 UX 路徑
- [ ] **學習模式：大單字卡、顏色標示、音節拆解、重音節標記** - 檢查是否已有對應 UX 路徑
- [ ] **響應式設計：支援手機、iPad、桌面裝置** - 創建對應的 UX 路徑

### 1.3 補充錯誤處理的預期結果

**狀態**：待完成

**任務清單**：

#### Dashboard 模組

- [ ] UX0001: 查看學習統計 - 補充錯誤處理預期結果
- [ ] UX0002: 開始複習挑戰 - 補充錯誤處理預期結果
- [ ] UX0003: 導航到字庫管理 - 補充錯誤處理預期結果
- [ ] UX0004: 手動觸發雲端同步 - 補充錯誤處理預期結果

#### Word Library 模組

- [ ] UX0005: 切換標籤頁 - 補充錯誤處理預期結果
- [ ] UX0006: 搜尋單字 - 補充錯誤處理預期結果
- [ ] UX0007: 篩選單字 - 補充錯誤處理預期結果
- [ ] UX0008: 排序單字 - 補充錯誤處理預期結果
- [ ] UX0009: 查看單字卡詳情 - 補充錯誤處理預期結果
- [ ] UX0010: 刪除單字卡 - 補充錯誤處理預期結果
- [ ] UX0011: 手動輸入單字 - 補充錯誤處理預期結果（已有部分）
- [ ] UX0012: 圖片上傳與識別 - 補充錯誤處理預期結果
- [ ] UX0013: AI 分析單字 - 補充錯誤處理預期結果（已有部分）
- [ ] UX0014: 預覽單字卡 - 補充錯誤處理預期結果
- [ ] UX0015: 儲存新單字卡 - 補充錯誤處理預期結果
- [ ] UX0032: 重新生成單字卡圖片 - 補充錯誤處理預期結果（已有部分）

#### Learning Mode 模組

- [ ] UX0016: 選擇學習 Level - 補充錯誤處理預期結果
- [ ] UX0017: 選擇語音 - 補充錯誤處理預期結果
- [ ] UX0018: 學習模式 - 查看單字卡 - 補充錯誤處理預期結果
- [ ] UX0019: 學習模式 - 切換音節顯示 - 補充錯誤處理預期結果
- [ ] UX0020: 學習模式 - 播放語音 - 補充錯誤處理預期結果
- [ ] UX0021: 學習模式 - 翻轉卡片 - 補充錯誤處理預期結果
- [ ] UX0022: 學習模式 - 切換到下一個單字 - 補充錯誤處理預期結果
- [ ] UX0023: 積木模式 - 播放語音 - 補充錯誤處理預期結果
- [ ] UX0024: 積木模式 - 重組字母 - 補充錯誤處理預期結果
- [ ] UX0025: 積木模式 - 檢查答案 - 補充錯誤處理預期結果
- [ ] UX0026: 聽寫模式 - 播放語音 - 補充錯誤處理預期結果
- [ ] UX0027: 聽寫模式 - 輸入單字 - 補充錯誤處理預期結果
- [ ] UX0028: 聽寫模式 - 檢查答案 - 補充錯誤處理預期結果

#### Flashcard 模組

- [ ] UX0029: 查看單字卡正面 - 補充錯誤處理預期結果
- [ ] UX0030: 翻轉單字卡查看背面 - 補充錯誤處理預期結果
- [ ] UX0031: 查看單字分析資訊 - 補充錯誤處理預期結果

### 1.4 補充即時反饋的預期結果

**狀態**：待完成

**任務清單**：

- [ ] UX0025: 積木模式 - 檢查答案 - 補充即時反饋預期結果
- [ ] UX0028: 聽寫模式 - 檢查答案 - 補充即時反饋預期結果

## 階段 2: 完整語意分析檢閱

### 2.1 檢閱方法

**不使用程式化檢查**，而是進行**語意分析檢閱**：

1. **閱讀 Feature 定義** - 理解功能意圖和一般性期望
2. **閱讀 UX 路徑定義** - 理解使用者體驗設計
3. **閱讀測試文件** - 理解測試預期
4. **閱讀實作程式碼** - 理解實際實作
5. **語意對比分析** - 檢查各層級之間的語意一致性

### 2.2 檢閱項目清單

#### Dashboard 模組檢閱

**Feature 文件**：`docs/features/dashboard.md`

**檢閱項目**：

- [ ] **Feature 定義檢閱**

  - [ ] 功能描述是否完整清晰？
  - [ ] 是否包含一般性期望說明？
  - [ ] 關鍵功能是否都有列出？

- [ ] **UX 路徑檢閱**（UX0001-UX0004）

  - [ ] UX0001: 查看學習統計
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/Dashboard.tsx` 的語意是否一致？
  - [ ] UX0002: 開始複習挑戰
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/Dashboard.tsx` 的語意是否一致？
  - [ ] UX0003: 導航到字庫管理
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/Dashboard.tsx` 的語意是否一致？
  - [ ] UX0004: 手動觸發雲端同步
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/Dashboard.tsx` 的語意是否一致？

- [ ] **測試檢閱**（tests/ux/UX0001.test.tsx - UX0004.test.tsx）

  - [ ] 測試描述是否完全符合 UX 定義？
  - [ ] 測試是否驗證了所有預期結果？
  - [ ] 測試是否執行了所有操作步驟？

- [ ] **實作檢閱**（components/Dashboard.tsx）
  - [ ] 實作是否通過所有測試？
  - [ ] 實作是否符合 UX 定義的語意？
  - [ ] 實作是否符合 Feature 的一般性期望？

#### Word Library 模組檢閱

**Feature 文件**：`docs/features/word-library.md`

**檢閱項目**：

- [ ] **Feature 定義檢閱**

  - [ ] 功能描述是否完整清晰？
  - [ ] 是否包含一般性期望說明？
  - [ ] 關鍵功能是否都有列出？

- [ ] **UX 路徑檢閱**（UX0005-UX0015, UX0032）

  - [ ] UX0005: 切換標籤頁
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0006: 搜尋單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0007: 篩選單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0008: 排序單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0009: 查看單字卡詳情
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0010: 刪除單字卡
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0011: 手動輸入單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0012: 圖片上傳與識別
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0013: AI 分析單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0014: 預覽單字卡
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0015: 儲存新單字卡
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 的語意是否一致？
  - [ ] UX0032: 重新生成單字卡圖片
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/WordLibrary.tsx` 和 `components/ImageRegenerateModal.tsx` 的語意是否一致？

- [ ] **測試檢閱**（tests/ux/UX0005.test.tsx - UX0015.test.tsx）

  - [ ] 每個測試的描述是否完全符合對應的 UX 定義？
  - [ ] 測試是否驗證了所有預期結果？
  - [ ] 測試是否執行了所有操作步驟？

- [ ] **實作檢閱**（components/WordLibrary.tsx, components/ImageRegenerateModal.tsx）
  - [ ] 實作是否通過所有測試？
  - [ ] 實作是否符合所有 UX 定義的語意？
  - [ ] 實作是否符合 Feature 的一般性期望？

#### Learning Mode 模組檢閱

**Feature 文件**：`docs/features/learning-mode.md`

**檢閱項目**：

- [ ] **Feature 定義檢閱**

  - [ ] 功能描述是否完整清晰？
  - [ ] 是否包含一般性期望說明？
  - [ ] 關鍵功能是否都有列出？

- [ ] **UX 路徑檢閱**（UX0016-UX0028）

  - [ ] UX0016: 選擇學習 Level
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0017: 選擇語音
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0018: 學習模式 - 查看單字卡
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0019: 學習模式 - 切換音節顯示
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0020: 學習模式 - 播放語音
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0021: 學習模式 - 翻轉卡片
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0022: 學習模式 - 切換到下一個單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0023: 積木模式 - 播放語音
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0024: 積木模式 - 重組字母
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0025: 積木模式 - 檢查答案
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0026: 聽寫模式 - 播放語音
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0027: 聽寫模式 - 輸入單字
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？
  - [ ] UX0028: 聽寫模式 - 檢查答案
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/LearningMode.tsx` 的語意是否一致？

- [ ] **測試檢閱**（tests/ux/UX0016.test.tsx - UX0028.test.tsx）

  - [ ] 每個測試的描述是否完全符合對應的 UX 定義？
  - [ ] 測試是否驗證了所有預期結果？
  - [ ] 測試是否執行了所有操作步驟？

- [ ] **實作檢閱**（components/LearningMode.tsx）
  - [ ] 實作是否通過所有測試？
  - [ ] 實作是否符合所有 UX 定義的語意？
  - [ ] 實作是否符合 Feature 的一般性期望？

#### Flashcard 模組檢閱

**Feature 文件**：`docs/features/flashcard.md`

**檢閱項目**：

- [ ] **Feature 定義檢閱**

  - [ ] 功能描述是否完整清晰？
  - [ ] 是否包含一般性期望說明？
  - [ ] 關鍵功能是否都有列出？

- [ ] **UX 路徑檢閱**（UX0029-UX0031）

  - [ ] UX0029: 查看單字卡正面
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/FlashcardComponent.tsx` 的語意是否一致？
  - [ ] UX0030: 翻轉單字卡查看背面
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/FlashcardComponent.tsx` 的語意是否一致？
  - [ ] UX0031: 查看單字分析資訊
    - [ ] 觸發條件是否明確？
    - [ ] 操作步驟是否完整？
    - [ ] 預期結果是否涵蓋所有功能點？
    - [ ] 與實作 `components/FlashcardComponent.tsx` 的語意是否一致？

- [ ] **測試檢閱**（tests/ux/UX0029.test.tsx - UX0031.test.tsx）

  - [ ] 每個測試的描述是否完全符合對應的 UX 定義？
  - [ ] 測試是否驗證了所有預期結果？
  - [ ] 測試是否執行了所有操作步驟？

- [ ] **實作檢閱**（components/FlashcardComponent.tsx）
  - [ ] 實作是否通過所有測試？
  - [ ] 實作是否符合所有 UX 定義的語意？
  - [ ] 實作是否符合 Feature 的一般性期望？

### 2.3 語意分析檢閱記錄

對每個檢閱項目，記錄：

1. **檢閱日期**
2. **檢閱者**（AI Agent）
3. **發現的問題**
4. **語意不一致的地方**
5. **改進建議**
6. **修正狀態**

**檢閱記錄格式**：

```markdown
### [UX####] [UX 路徑名稱]

**檢閱日期**：YYYY-MM-DD
**檢閱者**：AI Agent

**語意分析結果**：

1. **Feature -> UX 一致性**：

   - [ ] 符合
   - [ ] 部分符合（說明：...）
   - [ ] 不符合（說明：...）

2. **UX -> 測試一致性**：

   - [ ] 符合
   - [ ] 部分符合（說明：...）
   - [ ] 不符合（說明：...）

3. **測試 -> 實作一致性**：

   - [ ] 符合
   - [ ] 部分符合（說明：...）
   - [ ] 不符合（說明：...）

4. **發現的問題**：

   - 問題 1：...
   - 問題 2：...

5. **改進建議**：

   - 建議 1：...
   - 建議 2：...

6. **修正狀態**：
   - [ ] 待修正
   - [ ] 修正中
   - [ ] 已修正
```

## 階段 3: 問題修正與驗證

### 3.1 問題修正

根據語意分析檢閱結果，修正發現的問題：

- [ ] 修正 Feature 定義中的問題
- [ ] 修正 UX 定義中的問題
- [ ] 修正測試中的問題
- [ ] 修正實作中的問題

### 3.2 驗證修正

修正後進行驗證：

- [ ] 執行測試確認所有測試通過
- [ ] 重新進行語意分析檢閱
- [ ] 確認問題已解決

## 實施順序

1. **階段 1**: 實作後續建議（優先）
2. **階段 2**: 完整語意分析檢閱（核心任務）
3. **階段 3**: 問題修正與驗證（跟進）

## 預期成果

- 所有後續建議已完成
- 完整的語意分析檢閱報告
- 所有發現的問題已修正
- Feature -> UX -> 測試 -> 實作的完整語意一致性

## 相關文檔

- [TDD 工作流程完整檢視報告](../tdd-review-report.md)
- [TDD 工作流程指南](../development/tdd-workflow.md)
- [功能文檔](../features/README.md)
